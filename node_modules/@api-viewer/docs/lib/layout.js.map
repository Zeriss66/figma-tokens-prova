{"version":3,"file":"layout.js","sourceRoot":"","sources":["../src/layout.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, nothing, PropertyValues, TemplateResult } from 'lit';\nimport { property } from 'lit/decorators/property.js';\nimport {\n  Attribute,\n  ClassField,\n  ClassMethod,\n  CssCustomProperty,\n  CssPart,\n  Event,\n  Slot,\n  unquote\n} from '@api-viewer/common/lib/index.js';\nimport '@api-viewer/tabs';\nimport { parse } from './utils/markdown.js';\n\nconst renderItem = (\n  prefix: string,\n  name: string | TemplateResult,\n  description?: string,\n  valueType?: string,\n  value?: unknown,\n  attribute?: string\n): TemplateResult => {\n  return html`\n    <div part=\"docs-item\">\n      <div part=\"docs-row\">\n        <div part=\"docs-column\" class=\"column-name-${prefix}\">\n          <div part=\"docs-label\">Name</div>\n          <div part=\"docs-value\" class=\"accent\">${name}</div>\n        </div>\n        ${attribute === undefined\n          ? nothing\n          : html`\n              <div part=\"docs-column\">\n                <div part=\"docs-label\">Attribute</div>\n                <div part=\"docs-value\">${attribute}</div>\n              </div>\n            `}\n        ${valueType === undefined && value === undefined\n          ? nothing\n          : html`\n              <div part=\"docs-column\" class=\"column-type\">\n                <div part=\"docs-label\">Type</div>\n                <div part=\"docs-value\">\n                  ${valueType ||\n                  (Number.isNaN(Number(value)) ? typeof value : 'number')}\n                  ${value === undefined\n                    ? nothing\n                    : html` = <span class=\"accent\">${value}</span> `}\n                </div>\n              </div>\n            `}\n      </div>\n      <div ?hidden=${description === undefined}>\n        <div part=\"docs-label\">Description</div>\n        <div part=\"docs-markdown\">${parse(description)}</div>\n      </div>\n    </div>\n  `;\n};\n\nconst renderTab = (\n  heading: string,\n  array: unknown[],\n  content: TemplateResult\n): TemplateResult => {\n  const hidden = array.length === 0;\n  return html`\n    <api-viewer-tab slot=\"tab\" part=\"tab\" ?hidden=${hidden}>\n      ${heading}\n    </api-viewer-tab>\n    <api-viewer-panel slot=\"panel\" part=\"tab-panel\" ?hidden=${hidden}>\n      ${content}\n    </api-viewer-panel>\n  `;\n};\n\nconst renderMethod = (method: ClassMethod): TemplateResult => {\n  const params = method.parameters || [];\n  const type = method.return?.type?.text || 'void';\n\n  return html`\n    <span part=\"docs-method\">\n      ${method.name}(<span part=\"docs-method-params\"\n        >${params.map(\n          (param, idx) =>\n            html`<span part=\"docs-param-name\">${param.name}</span>:\n              <span part=\"docs-param-type\">${param.type?.text}</span>${idx ===\n              params.length - 1\n                ? ''\n                : ', '}`\n        )}</span\n      >)</span\n    ><span part=\"docs-method-type\">: ${type}</span>\n  `;\n};\n\nclass ApiDocsLayout extends LitElement {\n  @property() name = '';\n\n  @property({ attribute: false })\n  props: ClassField[] = [];\n\n  @property({ attribute: false })\n  attrs: Attribute[] = [];\n\n  @property({ attribute: false })\n  methods: ClassMethod[] = [];\n\n  @property({ attribute: false })\n  slots: Slot[] = [];\n\n  @property({ attribute: false })\n  events: Event[] = [];\n\n  @property({ attribute: false })\n  cssParts: CssPart[] = [];\n\n  @property({ attribute: false })\n  cssProps: CssCustomProperty[] = [];\n\n  protected createRenderRoot(): this {\n    return this;\n  }\n\n  protected render(): TemplateResult {\n    const { slots, props, attrs, methods, events, cssParts, cssProps } = this;\n\n    const emptyDocs = [\n      props,\n      attrs,\n      methods,\n      slots,\n      events,\n      cssProps,\n      cssParts\n    ].every((arr) => arr.length === 0);\n\n    const attributes = (attrs || []).filter(\n      (x) => !props.some((y) => y.name === x.fieldName)\n    );\n\n    return emptyDocs\n      ? html`\n          <div part=\"warning\">\n            The element &lt;${this.name}&gt; does not provide any documented\n            API.\n          </div>\n        `\n      : html`\n          <api-viewer-tabs>\n            ${renderTab(\n              'Properties',\n              props,\n              html`\n                ${props.map((prop) => {\n                  const { name, description, type } = prop;\n                  const attribute = (attrs || []).find(\n                    (x) => x.fieldName === name\n                  );\n                  return renderItem(\n                    'prop',\n                    name,\n                    description,\n                    type?.text,\n                    prop.default,\n                    attribute?.name\n                  );\n                })}\n              `\n            )}\n            ${renderTab(\n              'Attributes',\n              attributes,\n              html`\n                ${attributes.map(({ name, description, type }) =>\n                  renderItem('attr', name, description, type?.text)\n                )}\n              `\n            )}\n            ${renderTab(\n              'Methods',\n              methods,\n              html`\n                ${methods.map((method) =>\n                  renderItem('method', renderMethod(method), method.description)\n                )}\n              `\n            )}\n            ${renderTab(\n              'Slots',\n              slots,\n              html`\n                ${slots.map(({ name, description }) =>\n                  renderItem('slot', name, description)\n                )}\n              `\n            )}\n            ${renderTab(\n              'Events',\n              events,\n              html`\n                ${events.map(({ name, description }) =>\n                  renderItem('event', name, description)\n                )}\n              `\n            )}\n            ${renderTab(\n              'CSS Custom Properties',\n              cssProps,\n              html`\n                ${cssProps.map((prop) => {\n                  const { name, description } = prop;\n                  return renderItem(\n                    'css',\n                    name,\n                    description,\n                    '', // TODO: manifest does not provide type for CSS custom properties\n                    unquote(prop.default)\n                  );\n                })}\n              `\n            )}\n            ${renderTab(\n              'CSS Shadow Parts',\n              cssParts,\n              html`\n                ${cssParts.map(({ name, description }) =>\n                  renderItem('part', name, description)\n                )}\n              `\n            )}\n          </api-viewer-tabs>\n        `;\n  }\n\n  protected updated(props: PropertyValues): void {\n    if (props.has('name') && props.get('name')) {\n      const tabs = this.renderRoot.querySelector('api-viewer-tabs');\n      if (tabs) {\n        tabs.selectFirst();\n      }\n    }\n  }\n}\n\ncustomElements.define('api-docs-layout', ApiDocsLayout);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'api-docs-layout': ApiDocsLayout;\n  }\n}\n"]}