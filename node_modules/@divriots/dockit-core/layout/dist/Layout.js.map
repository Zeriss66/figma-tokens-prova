{"version":3,"sources":["../../../tmp/1l3a6u4e6/layout/src/menu.svg?raw","../../../tmp/1l3a6u4e6/layout/src/moon.svg?raw","../../../tmp/1l3a6u4e6/layout/src/sun.svg?raw","../../../tmp/1l3a6u4e6/layout/src/x.svg?raw","../../../tmp/1l3a6u4e6/layout/src/Layout.ts"],"sourcesContent":["export default \"<!-- \\\"menu\\\" from https://feathericons.com -->\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" class=\\\"feather feather-menu\\\"><line x1=\\\"3\\\" y1=\\\"12\\\" x2=\\\"21\\\" y2=\\\"12\\\"></line><line x1=\\\"3\\\" y1=\\\"6\\\" x2=\\\"21\\\" y2=\\\"6\\\"></line><line x1=\\\"3\\\" y1=\\\"18\\\" x2=\\\"21\\\" y2=\\\"18\\\"></line></svg>\"","export default \"<!-- \\\"moon\\\" from https://feathericons.com -->\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" class=\\\"feather feather-moon\\\"><path d=\\\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\\\"></path></svg>\"","export default \"<!-- \\\"sun\\\" from https://feathericons.com -->\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" class=\\\"feather feather-sun\\\"><circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"5\\\"></circle><line x1=\\\"12\\\" y1=\\\"1\\\" x2=\\\"12\\\" y2=\\\"3\\\"></line><line x1=\\\"12\\\" y1=\\\"21\\\" x2=\\\"12\\\" y2=\\\"23\\\"></line><line x1=\\\"4.22\\\" y1=\\\"4.22\\\" x2=\\\"5.64\\\" y2=\\\"5.64\\\"></line><line x1=\\\"18.36\\\" y1=\\\"18.36\\\" x2=\\\"19.78\\\" y2=\\\"19.78\\\"></line><line x1=\\\"1\\\" y1=\\\"12\\\" x2=\\\"3\\\" y2=\\\"12\\\"></line><line x1=\\\"21\\\" y1=\\\"12\\\" x2=\\\"23\\\" y2=\\\"12\\\"></line><line x1=\\\"4.22\\\" y1=\\\"19.78\\\" x2=\\\"5.64\\\" y2=\\\"18.36\\\"></line><line x1=\\\"18.36\\\" y1=\\\"5.64\\\" x2=\\\"19.78\\\" y2=\\\"4.22\\\"></line></svg>\"","export default \"<!-- \\\"x\\\" from https://feathericons.com -->\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" class=\\\"feather feather-x\\\"><line x1=\\\"18\\\" y1=\\\"6\\\" x2=\\\"6\\\" y2=\\\"18\\\"></line><line x1=\\\"6\\\" y1=\\\"6\\\" x2=\\\"18\\\" y2=\\\"18\\\"></line></svg>\"","import type { Context, Page } from '@divriots/studio-doc-compiler';\nimport { html, LitElement, nothing } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport { LayoutStyles } from './Layout.styles';\nimport menuSvg from './menu.svg?raw';\nimport moonSvg from './moon.svg?raw';\nimport sunSvg from './sun.svg?raw';\nimport xSvg from './x.svg?raw';\n\ntype ColorScheme = 'light' | 'dark';\n\nconst getInitialColorScheme = (): ColorScheme => {\n  return (\n    (localStorage.getItem('colorScheme') as ColorScheme | undefined) ||\n    (window.matchMedia('(prefers-color-scheme: dark)').matches && 'dark') ||\n    'light'\n  );\n};\n\n/**\n * Customisable layout for your documentation site.\n */\nexport class Layout extends LitElement {\n  static styles = LayoutStyles;\n\n  @property({ attribute: false })\n  context?: Context;\n\n  @property({ type: Boolean, attribute: 'disable-color-scheme-change' })\n  disableColorSchemeChange: boolean = false;\n\n  @property({ attribute: 'initial-color-scheme' })\n  initialColorScheme?: ColorScheme;\n\n  @state()\n  private isNavigationShown: boolean = false;\n\n  @state()\n  private colorScheme: ColorScheme;\n\n  @state()\n  private locationPathname = location.pathname;\n\n  private listenerRemovers: Function[] = [];\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    this.colorScheme = this.initialColorScheme || getInitialColorScheme();\n    this.dispatchColorSchemeChange();\n    this.setupWindowEvents();\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this.teardownWindowEvents();\n  }\n\n  requestUpdate(...args): void {\n    super.requestUpdate(...args);\n    const name = args[0] as PropertyKey;\n    if (name === 'context') {\n      this.locationPathname = location.pathname;\n    }\n  }\n\n  render() {\n    this.renderHost();\n    return html`\n      <div class=\"root\">\n        <div class=\"fixed-container\">\n          <div class=\"relative-container\">\n            <header class=\"header\">\n              <div class=\"logo-container\">\n                ${this.hasNavigation\n                  ? html`<a class=\"logo-link\" href=\"${this.getLogoHref()}\">\n                      <slot name=\"logo\"></slot>\n                    </a>`\n                  : html`<slot name=\"logo\"></slot>`}\n              </div>\n              <div class=\"topbar-container\">\n                <slot name=\"topbar\"></slot>\n              </div>\n              <div class=\"buttons-container\">\n                ${this.disableColorSchemeChange\n                  ? nothing\n                  : html`\n                      <button\n                        class=\"color-scheme-toggle\"\n                        aria-live=\"polite\"\n                        aria-label=\"${`Press to activate ${\n                          this.colorScheme === 'dark' ? 'light' : 'dark'\n                        } mode`}\"\n                        @click=\"${() => this.toggleColorScheme()}\"\n                      >\n                        ${unsafeHTML(\n                          this.colorScheme === 'dark' ? moonSvg : sunSvg\n                        )}\n                      </button>\n                    `}\n                ${this.hasNavigation\n                  ? html`\n                      <button\n                        class=\"navigation-toggle\"\n                        aria-live=\"polite\"\n                        aria-label=\"${`Press to ${\n                          this.isNavigationShown ? 'close' : 'open'\n                        } navigation`}\"\n                        @click=\"${() => this.toggleNavigation()}\"\n                      >\n                        ${unsafeHTML(this.isNavigationShown ? xSvg : menuSvg)}\n                      </button>\n                    `\n                  : nothing}\n              </div>\n            </header>\n            ${this.hasNavigation\n              ? html`<div\n                  class=\"navigation-wrapper\"\n                  @click=\"${(event) => this.onNavigationWrapperClick(event)}\"\n                >\n                  <nav class=\"navigation\">\n                    <ul>\n                      ${this.context.pagesGraph\n                        .filter(\n                          (group) =>\n                            !group.children || group.children.length > 0\n                        )\n                        .map(\n                          (group) => html`<li>\n                            ${group.children\n                              ? html`<span>${group.key}</span>`\n                              : nothing}\n                            <ul>\n                              ${(group.children ? group.children : [group]).map(\n                                (item) => html`<li>\n                                  <a\n                                    href=\"${this.getPageUrlWithoutOrigin(\n                                      item.page\n                                    )}\"\n                                    aria-current=\"${ifDefined(\n                                      this.locationPathname ===\n                                        this.getPageUrlWithoutOrigin(item.page)\n                                        ? 'location'\n                                        : undefined\n                                    )}\"\n                                  >\n                                    ${item.key}\n                                  </a>\n                                </li>`\n                              )}\n                            </ul>\n                          </li>`\n                        )}\n                    </ul>\n                  </nav>\n                </div>`\n              : nothing}\n          </div>\n        </div>\n        <main class=\"main-container\">\n          <article class=\"content\">\n            <slot></slot>\n          </article>\n        </main>\n      </div>\n    `;\n  }\n\n  private renderHost() {\n    if (this.hasNavigation) {\n      this.setAttribute('data-has-navigation', '');\n    } else {\n      this.removeAttribute('data-has-navigation');\n    }\n    if (this.isNavigationShown) {\n      this.setAttribute('data-is-navigation-shown', '');\n    } else {\n      this.removeAttribute('data-is-navigation-shown');\n    }\n    this.setAttribute('data-color-scheme', this.colorScheme);\n  }\n\n  private dispatchColorSchemeChange(): void {\n    this.dispatchEvent(\n      new CustomEvent('color-scheme-change', {\n        detail: { colorScheme: this.colorScheme },\n      })\n    );\n  }\n\n  private setupWindowEvents() {\n    const windowKeydownListener = (event: KeyboardEvent) =>\n      this.onWindowKeydown(event);\n    window.addEventListener('keydown', windowKeydownListener);\n    this.listenerRemovers.push(() => {\n      window.removeEventListener('keydown', windowKeydownListener);\n    });\n  }\n\n  private teardownWindowEvents() {\n    this.listenerRemovers.forEach((removeListener) => removeListener());\n    this.listenerRemovers = [];\n  }\n\n  private getLogoHref() {\n    let page = '';\n    if (this.hasNavigation && this.context.pagesGraph?.length > 0) {\n      const pageGraph = this.context.pagesGraph[0];\n      page =\n        pageGraph.page ||\n        (pageGraph.children?.length > 0 ? pageGraph.children[0].page : '');\n    }\n    return page ? this.getPageUrlWithoutOrigin(page) : '';\n  }\n\n  private get hasNavigation(): boolean {\n    return !!(this.context && this.context.pagesGraph);\n  }\n\n  private getPageUrlWithoutOrigin(page: Page): string {\n    return this.context.base + page.url;\n  }\n\n  private toggleColorScheme(): void {\n    this.colorScheme = this.colorScheme === 'dark' ? 'light' : 'dark';\n    this.dispatchColorSchemeChange();\n    localStorage.setItem('colorScheme', this.colorScheme);\n  }\n\n  private toggleNavigation(): void {\n    this.isNavigationShown = !this.isNavigationShown;\n  }\n\n  private onWindowKeydown(event: KeyboardEvent): void {\n    if (this.isNavigationShown && event.key === 'Escape') {\n      this.hideNavigation();\n    }\n  }\n\n  private onNavigationWrapperClick(event: Event): void {\n    if (\n      event.target === event.currentTarget ||\n      (event.target as HTMLElement).tagName === 'A'\n    ) {\n      this.hideNavigation();\n    }\n  }\n\n  private hideNavigation(): void {\n    this.isNavigationShown = false;\n  }\n}\n"],"names":[],"mappings":"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","sourceRoot":"/source_map/"}